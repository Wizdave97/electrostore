(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{5991:function(e,t,a){"use strict";a.r(t);var n=a(54),r=a(55),o=a(58),i=a(56),l=a(59),s=a(0),c=a.n(s),d=a(10),u=a(70),p=a(214),m=a.n(p),f=a(151),g=a(57),h=a(3),b=function(e){return{container:{display:"flex"},profile:{width:"100%",display:"flex",flexWrap:"wrap",alignSelf:"center"},profileForm:{width:"100%",display:"flex",flexWrap:"wrap",boxSizing:"border-box",padding:"30px"},paper:{width:"100%",display:"flex",flexWrap:"wrap",padding:"40px",boxSizing:"border-box"},form:{display:"flex",flexWrap:"wrap",width:"100%"},logoContainer:{width:"100%",display:"flex",padding:"5px",boxSizing:"border-box","& div":{width:"30%",margin:"0 auto",transform:"rotate(30deg)","& img":{width:"100%",height:"auto"}}},heading:{width:"100%",padding:"5px",boxSizing:"border-box",display:"flex"},profileDetails:{width:"100%",display:"flex",flexWrap:"wrap",boxSizing:"border-box"},textField:{marginBottom:e.spacing.unit},button:{margin:"".concat(e.spacing.unit,"px auto")}}},y=function(e){return new Promise(function(t){var a=new FileReader;a.onload=function(e){t(e.target.result)},a.readAsDataURL(e)})},x=function(e,t){return new Promise(function(a){var n=document.createElement("canvas"),r=new Image;r.onload=function(e){var o=n.getContext("2d");r.height>100&&(r.width*=100/r.height,r.height=100),o.clearRect(0,0,n.width,n.height),n.height=r.height,n.width=r.width,o.drawImage(r,0,0,r.width,r.height),n.toBlob(function(e){a(e)},t)},r.src=e})},w=a(5980),v=a.n(w),E=a(4);v.a.initializeApp({apiKey:"AIzaSyArs2eYMjFtvxRpRmYqWexaDuQnd0OLX44",authDomain:"electrostore-bb2a3.firebaseapp.com",databaseURL:"https://electrostore-bb2a3.firebaseio.com",projectId:"electrostore-bb2a3",storageBucket:"electrostore-bb2a3.appspot.com",messagingSenderId:"41927039846",appId:"1:41927039846:web:47b1904dc2ed6b7c"});var I=function(e,t){return{type:e,data:t}},N=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),s=0;s<r;s++)l[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={isUpdate:!1},a.submitProfileForm=function(e){e.preventDefault();var t=document.getElementById("name").value,n=document.getElementById("tel").value,r=document.getElementById("photo").files[0];y(r).then(function(e){x(e,r.type).then(function(e){a.props.onSubmitProfile(t,n,e,r.type,a.state.isUpdate)})})},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.setState({isUpdate:null!==this.props.userName})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.isUpdate,n=c.a.createElement(s.Fragment,null,c.a.createElement(h.p,{className:t.paper},c.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:function(t){return e.submitProfileForm(t)}},c.a.createElement("div",{className:t.logoContainer},c.a.createElement("div",null,c.a.createElement("img",{src:m.a,alt:"mob store"}))),c.a.createElement("div",{className:t.heading},c.a.createElement(h.u,{variant:"h5",color:"secondary",align:"center",gutterBottom:!0},a?"Update your profile":"Create your profile")),c.a.createElement("div",{className:t.profileDetails},c.a.createElement(h.r,{className:t.textField,required:!0,id:"name",label:"Full Name",type:"text",name:"name",variant:"standard",autoComplete:"name",fullWidth:!0,margin:"normal"}),c.a.createElement(h.r,{className:t.textField,required:!0,id:"tel",label:"Telephone Number",type:"tel",name:"phone",variant:"standard",autoComplete:"tel",fullWidth:!0,margin:"normal"}),c.a.createElement(h.r,{className:t.textField,required:!!this.state.isUpdate,id:"photo",label:"Profile Picture",type:"file",name:"photo",variant:"standard",fullWidth:!0,margin:"normal"}),c.a.createElement(h.c,{type:"submit",color:"secondary",className:t.button,variant:"contained",size:"medium"},a?"Update Profile":"Create Profile"))))),r=n;if(this.props.loading&&(r=c.a.createElement(f.a,null)),this.props.uploadingImage&&(r=c.a.createElement(h.u,{variant:"body1",color:"secondary",align:"center",style:{width:"100%"},gutterBottom:!0},"Uploading Image ",this.props.imageUploadProgress," % done")),this.props.error||this.props.uploadingImageFail){r=c.a.createElement(s.Fragment,null,c.a.createElement(h.u,{variant:"body1",color:"error",align:"center",style:{width:"100%"},gutterBottom:!0},"An Error Ocurred please retry"),n)}return c.a.createElement(c.a.Fragment,null,this.props.success?c.a.createElement(u.a,{to:"/"}):null,c.a.createElement(h.k,{item:!0,className:t.container,xs:11,sm:8,md:6},c.a.createElement("div",{className:t.profile},r)))}}]),t}(s.Component);t.default=Object(g.b)(function(e){return{userName:e.auth.userName,loading:e.profile.loading,success:e.profile.success,error:e.profile.success,uploadingImage:e.profile.uploadingImage,uploadingImageFail:e.profile.uploadingImageFail,uploadingImageSuccess:e.profile.uploadingImageSuccess,imageUploadProgress:e.profile.imageUploadProgress}},function(e){return{onSubmitProfile:function(t,a,n,r,o){return e(function(e,t,a,n,r){return function(r,o){var i=o().auth.idToken;r(I(E.F,null));var l=a,s=v.a.storage().ref(),c=n.match(/jpe?g|png/g)[0],d={contentType:n},u=s.child("profilePictures/"+e+"."+c).put(l,d);u.on(v.a.storage.TaskEvent.STATE_CHANGED,function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+t+"% done"),r(I(E.M,t))},function(e){r(I(E.E,null))},function(){r(I(E.G,null)),u.snapshot.ref.getDownloadURL().then(function(a){var n=o().auth.localId,l={name:e,userId:n,tel:t,photoUrl:a};r(I(E.I,null)),fetch("https://electrostore-bb2a3.firebaseio.com/users.json?auth=".concat(i),{method:"POST",body:JSON.stringify(l)}).then(function(e){return e.json()}).then(function(e){r(I(E.J,null))}).catch(function(t){r(I(E.H,null)),s.child("profilePictures/"+e+"."+c).delete().then(function(){}).catch(function(e){})})})})}}(t,a,n,r))}}})(Object(d.withStyles)(b)(N))}}]);
//# sourceMappingURL=9.c27e4350.chunk.js.map